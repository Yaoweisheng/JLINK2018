<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jlink.dao.UserinfoDao" >
  <resultMap id="BaseResultMap" type="com.jlink.entity.Userinfo" >
    <result column="UserId" property="userid" jdbcType="INTEGER" />
    <result column="BADGENUMBER" property="badgenumber" jdbcType="VARCHAR" />
    <result column="SSN" property="ssn" jdbcType="VARCHAR" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="GENDER" property="gender" jdbcType="VARCHAR" />
    <result column="TITLE" property="title" jdbcType="VARCHAR" />
    <result column="PAGER" property="pager" jdbcType="VARCHAR" />
    <result column="BIRTHDAY" property="birthday" jdbcType="TIMESTAMP" />
    <result column="HIREDDAY" property="hiredday" jdbcType="TIMESTAMP" />
    <result column="STREET" property="street" jdbcType="VARCHAR" />
    <result column="CITY" property="city" jdbcType="VARCHAR" />
    <result column="STATE" property="state" jdbcType="VARCHAR" />
    <result column="ZIP" property="zip" jdbcType="VARCHAR" />
    <result column="OPHONE" property="ophone" jdbcType="VARCHAR" />
    <result column="FPHONE" property="fphone" jdbcType="VARCHAR" />
    <result column="ATT" property="att" jdbcType="SMALLINT" />
    <result column="INLATE" property="inlate" jdbcType="SMALLINT" />
    <result column="OUTEARLY" property="outearly" jdbcType="SMALLINT" />
    <result column="OVERTIME" property="overtime" jdbcType="SMALLINT" />
    <result column="SEP" property="sep" jdbcType="SMALLINT" />
    <result column="HOLIDAY" property="holiday" jdbcType="SMALLINT" />
    <result column="MINZU" property="minzu" jdbcType="VARCHAR" />
    <result column="CardNo" property="cardno" jdbcType="VARCHAR" />
    <result column="DEPT_NO" property="deptNo" jdbcType="VARCHAR" />
    <result column="LeaveDate" property="leavedate" jdbcType="TIMESTAMP" />
    <result column="DEFAULTDEPTID" property="defaultdeptid" jdbcType="INTEGER" />
  </resultMap>
  <insert id="save" useGeneratedKeys="true" keyProperty="userid" parameterType="com.jlink.entity.Userinfo" >
    insert into userinfo (BADGENUMBER, SSN,
      NAME, GENDER, TITLE, 
      PAGER, BIRTHDAY, HIREDDAY, 
      STREET, CITY, STATE, 
      ZIP, OPHONE, FPHONE, 
      ATT, INLATE, OUTEARLY, 
      OVERTIME, SEP, HOLIDAY, 
      MINZU, CardNo, DEPT_NO, 
      LeaveDate, DEFAULTDEPTID)
    values (#{badgenumber,jdbcType=VARCHAR}, #{ssn,jdbcType=VARCHAR},
      #{name,jdbcType=VARCHAR}, #{gender,jdbcType=VARCHAR}, #{title,jdbcType=VARCHAR}, 
      #{pager,jdbcType=VARCHAR}, #{birthday,jdbcType=TIMESTAMP}, #{hiredday,jdbcType=TIMESTAMP}, 
      #{street,jdbcType=VARCHAR}, #{city,jdbcType=VARCHAR}, #{state,jdbcType=VARCHAR}, 
      #{zip,jdbcType=VARCHAR}, #{ophone,jdbcType=VARCHAR}, #{fphone,jdbcType=VARCHAR}, 
      #{att,jdbcType=SMALLINT}, #{inlate,jdbcType=SMALLINT}, #{outearly,jdbcType=SMALLINT}, 
      #{overtime,jdbcType=SMALLINT}, #{sep,jdbcType=SMALLINT}, #{holiday,jdbcType=SMALLINT}, 
      #{minzu,jdbcType=VARCHAR}, #{cardno,jdbcType=VARCHAR}, #{deptNo,jdbcType=VARCHAR}, 
      #{leavedate,jdbcType=TIMESTAMP}, #{defaultdeptid,jdbcType=INTEGER})
  </insert>
  <select id="getUserinfoByUserId" resultType="com.jlink.entity.Userinfo" parameterType="Integer">
    select BADGENUMBER, SSN,
      NAME, GENDER, TITLE,
      PAGER, BIRTHDAY, HIREDDAY,
      STREET, CITY, STATE,
      ZIP, OPHONE, FPHONE,
      ATT, INLATE, OUTEARLY,
      OVERTIME, SEP, HOLIDAY,
      MINZU, CardNo, DEPT_NO,
      LeaveDate, DEFAULTDEPTID
    from userinfo
    where UserId = #{userid}
  </select>
  <select id="query" resultType="com.jlink.entity.Userinfo">
    select UserId, BADGENUMBER, SSN,
    NAME, GENDER, TITLE,
    PAGER, BIRTHDAY, HIREDDAY,
    STREET, CITY, STATE,
    ZIP, OPHONE, FPHONE,
    ATT, INLATE, OUTEARLY,
    OVERTIME, SEP, HOLIDAY,
    MINZU, CardNo, DEPT_NO,
    LeaveDate, DEFAULTDEPTID
    from userinfo
    where 1=1
    <if test="badgenumber != null and badgenumber != ''">
      and BADGENUMBER like "%"#{badgenumber}"%"
    </if>
    <if test="name != null and name != ''">
      and name like "%"#{name}"%"
    </if>
    <if test="phone != null and phone != ''">
      and PAGER like "%"#{phone}"%"
    </if>
    <if test="deptNo != null and deptNo != ''">
      and DEPT_NO like #{deptNo}"%"
    </if>
    order by UserId limit #{offset}, #{limit}
  </select>
  <select id="getCount" resultType="Integer">
    select count(*)
    from userinfo
    where 1=1
    <if test="badgenumber != null and badgenumber != ''">
      and BADGENUMBER like "%"#{badgenumber}"%"
    </if>
    <if test="name != null and name != ''">
      and name like "%"#{name}"%"
    </if>
    <if test="phone != null and phone != ''">
      and PAGER like "%"#{phone}"%"
    </if>
    <if test="deptNo != null and deptNo != ''">
      and DEPT_NO like #{deptNo}"%"
    </if>
  </select>
  <delete id="delete" parameterType="Integer">
    delete from userinfo where UserId = #{userId}
  </delete>
  <insert id="batchSave" useGeneratedKeys="true" keyProperty="id" parameterType="java.util.List">
    insert ignore into userinfo (BADGENUMBER, SSN,
    NAME, GENDER, TITLE,
    PAGER, BIRTHDAY, HIREDDAY,
    STREET, CITY, STATE,
    ZIP, OPHONE, FPHONE,
    ATT, INLATE, OUTEARLY,
    OVERTIME, SEP, HOLIDAY,
    MINZU, CardNo, DEPT_NO,
    LeaveDate, DEFAULTDEPTID)
    values
    <foreach collection="list" item="item" separator=",">
      (#{item.badgenumber,jdbcType=VARCHAR}, #{item.ssn,jdbcType=VARCHAR},
      #{item.name,jdbcType=VARCHAR}, #{item.gender,jdbcType=VARCHAR}, #{item.title,jdbcType=VARCHAR},
      #{item.pager,jdbcType=VARCHAR}, #{item.birthday,jdbcType=TIMESTAMP}, #{item.hiredday,jdbcType=TIMESTAMP},
      #{item.street,jdbcType=VARCHAR}, #{item.city,jdbcType=VARCHAR}, #{item.state,jdbcType=VARCHAR},
      #{item.zip,jdbcType=VARCHAR}, #{item.ophone,jdbcType=VARCHAR}, #{item.fphone,jdbcType=VARCHAR},
      #{item.att,jdbcType=SMALLINT}, #{item.inlate,jdbcType=SMALLINT}, #{item.outearly,jdbcType=SMALLINT},
      #{item.overtime,jdbcType=SMALLINT}, #{item.sep,jdbcType=SMALLINT}, #{item.holiday,jdbcType=SMALLINT},
      #{item.minzu,jdbcType=VARCHAR}, #{item.cardno,jdbcType=VARCHAR}, #{item.deptNo,jdbcType=VARCHAR},
      #{item.leavedate,jdbcType=TIMESTAMP}, #{item.defaultdeptid,jdbcType=INTEGER})
    </foreach>
  </insert>
</mapper>